resources:
  # The Property Liked Events Report Dashboard used to visualize the outputs of our pipelines.
  dashboards:
    property_liked_events_report:
      display_name: "Property Liked Events Report"
      file_path: ../src/dashboards/Property Liked Events Report.lvdash.json
      warehouse_id: ${var.warehouse_id}
      embed_credentials: true
      permissions:
      # The following permissions are required to share your dashboard with other participants!
      - group_name: dbks_core-tech-zretreat-2025
        level: CAN_RUN


  # The main job for the lab.
  # Orchestrates the following:
  #  - Silver layer refresh
  #  - Gold layer refresh
  #  - Dashboard refresh
  #  - Online table refresh
  jobs:
    property_liked_events_processing:
      name: property_liked_events_processing
      description: | 
        DLT pipelines ingest and transform property-liked events data that is then visualized in an AI/BI dashboard.
      budget_policy_id: 188c9629-1c3d-4de4-8f88-4ff88de61c45 # core-tech-zretreat-2025
      tasks:
        - task_key: property_liked_events_silver
          pipeline_task:
            pipeline_id: ${resources.pipelines.property_liked_events_silver.id}
        - task_key: property_liked_events_gold
          pipeline_task:
            pipeline_id: ${resources.pipelines.property_liked_events_gold.id}
          depends_on:
            - task_key: property_liked_events_silver
        - task_key: refresh_property_liked_events_report
          description: Refresh the property_liked Report Events Dashboard
          dashboard_task:
            dashboard_id: ${resources.dashboards.property_liked_events_report.id}
          depends_on:
            - task_key: property_liked_events_gold
          
